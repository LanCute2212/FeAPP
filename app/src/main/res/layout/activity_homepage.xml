<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:app="http://schemas.android.com/apk/res-auto"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/scroll"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="#FFFFFF"
  android:fillViewport="true">

  <androidx.constraintlayout.widget.ConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingTop="16dp"
    android:paddingBottom="100dp"
    android:paddingStart="16dp"
    android:paddingEnd="16dp">

    <!-- Toggle: Theo ngày / Theo tuần -->
    <Button
      android:id="@+id/btn_xem_chi_tiet"
      android:layout_width="0dp"
      android:layout_height="44dp"
      android:layout_marginTop="12dp"
      android:background="@drawable/btn_outline_green"
      android:backgroundTint="@null"
      android:text="Check details"
      android:textColor="#3B8F3B"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/meals_row" />

    <!-- Card: Calo & Dinh dưỡng -->
    <LinearLayout
      android:id="@+id/toggle_period"
      android:layout_width="0dp"
      android:layout_height="44dp"
      android:layout_marginTop="12dp"
      android:layout_marginBottom="12dp"
      android:padding="4dp"
      android:background="#F0F7F0"
      android:gravity="center"
      android:orientation="horizontal"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toTopOf="parent">

      <TextView
        android:id="@+id/btn_theo_ngay"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:text="By Day"
        android:textColor="#9E9E9E"
        android:textSize="14sp" />

      <TextView
        android:id="@+id/btn_theo_tuan"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:text="By Week"
        android:textColor="#9E9E9E"
        android:textSize="14sp" />
    </LinearLayout>

    <!-- Section: Nhật ký ăn uống -->
    <LinearLayout
      android:id="@+id/meals_row"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_marginTop="12dp"
      android:gravity="center"
      android:orientation="horizontal"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/title_nhatky">

      <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical">

        <FrameLayout
          android:layout_width="64dp"
          android:layout_height="64dp">

          <ImageView
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center"
            android:contentDescription="sang"
            android:src="@drawable/ic_breakfast" />

          <ImageView
            android:id="@+id/breakfast_add_button"
            android:layout_width="15dp"
            android:layout_height="15dp"
            android:layout_margin="4dp"
            android:layout_gravity="bottom|end"
            android:src="@drawable/ic_add" />
        </FrameLayout>

        <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="8dp"
          android:text="Breakfast"
          android:textColor="#4A4A4A" />
      </LinearLayout>

      <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical">

        <FrameLayout
          android:layout_width="64dp"
          android:layout_height="64dp">

          <ImageView
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center"
            android:contentDescription="trua"
            android:src="@drawable/ic_lunch" />

          <ImageView
            android:id="@+id/lunch_add_button"
            android:layout_width="15dp"
            android:layout_height="15dp"
            android:layout_margin="4dp"
            android:layout_gravity="bottom|end"
            android:src="@drawable/ic_add" />
        </FrameLayout>

        <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="8dp"
          android:text="Lunch"
          android:textColor="#4A4A4A" />
      </LinearLayout>

      <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical">

        <FrameLayout
          android:layout_width="64dp"
          android:layout_height="64dp">

          <ImageView
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center"
            android:contentDescription="toi"
            android:src="@drawable/ic_dinner" />

          <ImageView
            android:id="@+id/dinner_add_button"
            android:layout_width="15dp"
            android:layout_height="15dp"
            android:layout_margin="4dp"
            android:layout_gravity="bottom|end"
            android:src="@drawable/ic_add" />
        </FrameLayout>

        <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="8dp"
          android:text="Dinner"
          android:textColor="#4A4A4A" />
      </LinearLayout>

    </LinearLayout>

    <!-- Row of meal circles: Sáng, Trưa, Tối, Phụ -->
    <LinearLayout
      android:id="@+id/quick_add_row"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_marginTop="16dp"
      android:orientation="horizontal"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/collapse"></LinearLayout>

    <!-- Button: Xem chi tiết bữa ăn -->
    <TextView
      android:id="@+id/title_nhatky"
      android:textStyle="bold"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginTop="12dp"
      android:fontFamily="@font/poppins_bold"
      android:text="Eating Schedule"
      android:textSize="18sp"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/card_calories" />

    <!-- Chi tiết bữa ăn (removed) -->

    <!-- Footer small line "Thu gọn ^" -->
    <TextView
      android:id="@+id/collapse"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginTop="8dp"
      android:textColor="#6B6B6B"
      android:textSize="13sp"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintTop_toBottomOf="@id/btn_xem_chi_tiet" />

    <!-- Quick Add Icons Row -->

    <!-- Divider before Activity List -->
    <TextView
      android:id="@+id/list_activity"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:fontFamily="@font/poppins_bold"
      android:text="@string/list_activity"
      android:textSize="18sp"
      app:layout_constraintBottom_toBottomOf="@+id/quick_add_row"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@+id/btn_xem_chi_tiet"
      app:layout_constraintVertical_bias="1.0" />

    <!-- Card: Activity List -->
    <androidx.cardview.widget.CardView
      android:id="@+id/card_calories"
      android:layout_width="0dp"
      android:layout_height="220dp"
      android:layout_marginTop="12dp"
      android:padding="16dp"
      app:cardCornerRadius="16dp"
      app:cardElevation="4dp"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/toggle_period">

      <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginHorizontal="5dp">

        <ImageView
          android:id="@+id/apple_img"
          android:layout_width="150dp"
          android:layout_height="150dp"
          android:layout_marginStart="16dp"
          android:contentDescription="apple"
          android:src="@drawable/ic_danap"
          app:layout_constraintStart_toStartOf="parent"
          app:layout_constraintTop_toBottomOf="@id/title_cal" />

        <LinearLayout
          android:id="@+id/right_stats"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginEnd="8dp"
          android:gravity="center_vertical"
          android:orientation="vertical"
          app:layout_constraintEnd_toEndOf="parent"
          app:layout_constraintTop_toBottomOf="@id/title_cal">

          <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="8dp"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
              android:id="@+id/lightning"
              android:layout_width="20dp"
              android:layout_height="20dp"
              android:contentDescription="energy"
              android:src="@drawable/ic_lightning" />

            <LinearLayout
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginStart="8dp"
              android:orientation="vertical">

              <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Intake"
                android:textColor="#6B6B6B"
                android:textSize="12sp" />

              <TextView
                android:textStyle="bold"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="553"
                android:textColor="#111111"
                android:textSize="18sp" />
            </LinearLayout>
          </LinearLayout>

          <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="8dp"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
              android:layout_width="20dp"
              android:layout_height="20dp"
              android:contentDescription="remaining"
              android:src="@drawable/ic_plate" />

            <LinearLayout
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginStart="8dp"
              android:orientation="vertical">

              <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Remaining"
                android:textColor="#6B6B6B"
                android:textSize="12sp" />

              <TextView
                android:textStyle="bold"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="553"
                android:textColor="#111111"
                android:textSize="18sp" />
            </LinearLayout>
          </LinearLayout>

          <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
              android:id="@+id/fire"
              android:layout_width="20dp"
              android:layout_height="20dp"
              android:contentDescription="burn"
              android:src="@drawable/ic_fire" />

            <LinearLayout
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginStart="8dp"
              android:orientation="vertical">

              <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Consumed"
                android:textColor="#6B6B6B"
                android:textSize="12sp" />

              <TextView
                android:textStyle="bold"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="0"
                android:textColor="#111111"
                android:textSize="18sp" />
            </LinearLayout>
          </LinearLayout>
        </LinearLayout>

        <!-- Large apple image on left -->
        <LinearLayout
          android:id="@+id/nutrition_bars"
          android:layout_width="0dp"
          android:layout_height="20dp"
          android:layout_marginTop="8dp"
          android:orientation="horizontal"
          app:layout_constraintBottom_toBottomOf="parent"
          app:layout_constraintEnd_toEndOf="parent"
          app:layout_constraintStart_toStartOf="parent">

          <!-- Carbs -->
          <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:orientation="horizontal">

            <ImageView
              android:layout_width="15dp"
              android:layout_height="15dp"
              android:layout_marginRight="5dp"
              android:contentDescription="burn"
              android:src="@drawable/ic_carb" />

            <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Carbs"
              android:textColor="#6B6B6B"
              android:textSize="12sp" />

          </LinearLayout>

          <!-- Protein -->
          <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:orientation="horizontal">

            <ImageView
              android:layout_width="15dp"
              android:layout_height="15dp"
              android:layout_marginRight="5dp"
              android:contentDescription="burn"
              android:src="@drawable/ic_protein" />

            <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Protein"
              android:textColor="#6B6B6B"
              android:textSize="12sp" />

          </LinearLayout>

          <!-- Fat -->
          <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:orientation="horizontal">

            <ImageView
              android:layout_width="15dp"
              android:layout_height="15dp"
              android:layout_marginRight="5dp"
              android:contentDescription="burn"
              android:src="@drawable/ic_fat" />

            <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Fat"
              android:textColor="#6B6B6B"
              android:textSize="12sp" />

          </LinearLayout>

        </LinearLayout>

        <TextView
          android:id="@+id/da_nap"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:gravity="center"
          android:text="Intake\n553"
          android:textAlignment="center"
          android:textColor="#FF8A00"
          android:textSize="16sp"
          app:layout_constraintBottom_toBottomOf="@id/apple_img"
          app:layout_constraintEnd_toEndOf="@id/apple_img"
          app:layout_constraintStart_toStartOf="@id/apple_img"
          app:layout_constraintTop_toTopOf="@id/apple_img"
          app:layout_constraintVertical_bias="0.6" />

        <!-- Right side small stats -->
        <TextView
          android:id="@+id/stat_button"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginEnd="15dp"
          android:text="Statistics"
          android:textColor="#6B6B6B"
          android:textSize="13sp"
          app:layout_constraintEnd_toEndOf="parent"
          app:layout_constraintTop_toTopOf="parent" />

        <!-- Nutrition bars at bottom of card -->
        <TextView
          android:id="@+id/title_cal"
          android:textStyle="bold"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:fontFamily="@font/poppins_bold"
          android:text="Calories and Nutritions"
          android:textColor="#111111"
          android:textSize="18sp"
          app:layout_constraintStart_toStartOf="parent"
          app:layout_constraintTop_toTopOf="parent" />

      </androidx.constraintlayout.widget.ConstraintLayout>

    </androidx.cardview.widget.CardView>

    <!-- Card: Activity List -->
    <androidx.cardview.widget.CardView
      android:id="@+id/card_activity_list"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_marginLeft="8dp"
      android:layout_marginRight="8dp"
      android:layout_marginTop="16dp"
      app:cardCornerRadius="16dp"
      app:cardElevation="3dp"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/quick_add_row">

      <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- Header with summary stats (always visible) -->
        <include
          android:id="@+id/activity_header"
          layout="@layout/activity_summary_header" />

        <!-- Activities Container Box (hidden by default) -->
        <LinearLayout
          android:id="@+id/activities_container"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_marginTop="12dp"
          android:layout_marginBottom="12dp"
          android:paddingTop="16dp"
          android:paddingBottom="16dp"
          android:background="#F8F9FA"
          android:orientation="vertical"
          android:visibility="gone">

          <!-- RecyclerView for Activities -->
          <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/activities_recycler_view"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:nestedScrollingEnabled="false" />

        </LinearLayout>

      </LinearLayout>

    </androidx.cardview.widget.CardView>

    <!-- Divider after Activity List -->
    <View
      android:id="@+id/divider_below_activities"
      android:layout_width="match_parent"
      android:layout_height="1dp"
      android:background="#E0E0E0"
      app:layout_constraintEnd_toEndOf="parent"
      app:layout_constraintStart_toStartOf="parent"
      app:layout_constraintTop_toBottomOf="@id/card_activity_list" />

  </androidx.constraintlayout.widget.ConstraintLayout>

</androidx.core.widget.NestedScrollView>